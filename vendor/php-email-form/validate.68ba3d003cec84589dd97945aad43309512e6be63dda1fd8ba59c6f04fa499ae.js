(()=>{(function(){"use strict";document.querySelectorAll(".php-email-form").forEach(function(r){r.addEventListener("submit",function(o){o.preventDefault();let t=this,e=t.getAttribute("action"),i=t.getAttribute("data-recaptcha-site-key");if(!e){a(t,"The form action property is not set!");return}t.querySelector(".loading").classList.add("d-block"),t.querySelector(".error-message").classList.remove("d-block"),t.querySelector(".sent-message").classList.remove("d-block");let s=new FormData(t);i?typeof grecaptcha<"u"?grecaptcha.ready(function(){try{grecaptcha.execute(i,{action:"php_email_form_submit"}).then(c=>{s.set("recaptcha-response",c),l(t,e,s)})}catch(c){a(t,c)}}):a(t,"The reCaptcha javascript API url is not loaded!"):l(t,e,s)})});function l(r,o,t){fetch(o,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.text();throw new Error(`${e.status} ${e.statusText} ${e.url}`)}).then(e=>{if(r.querySelector(".loading").classList.remove("d-block"),e.trim()=="OK")r.querySelector(".sent-message").classList.add("d-block"),r.reset();else throw new Error(e||"Form submission failed and no error message returned from: "+o)}).catch(e=>{a(r,e)})}function a(r,o){r.querySelector(".loading").classList.remove("d-block"),r.querySelector(".error-message").innerHTML=o,r.querySelector(".error-message").classList.add("d-block")}})();})();
